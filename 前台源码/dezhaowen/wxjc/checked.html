<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>竣工检查</title>
		<link rel="stylesheet" href="static/css/bootstrap.min.css" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<style>
	div:{
		border: 1px solid black;
	}
	.row>div{
	  		display: flex;
	  		justify-content:space-between
	  	}
	 .ser{
	 	display: inline-block;
	 	
	 }
	 #ser{
	 	padding-top: 20px;
	 }
	 #meun div{
	 	float: right;
	 }
	 #meun a{
	 	color: black;
	 	font-size: 20px;
	 }
	 .firstdiv{
	 	background-color:#F7F7F7;
	 }
	 #caidan{
	 	background-color:#F7F7F7;
	 	height: 30px;
	 }
	 #ser button{
	 	margin-right: 10px;
	 }
	 #ss{
	 	border-top: 1px solid green;
	 	padding-top: 20px;
	 }
	 .ss{
	 	width: 250px;
	 	margin-right: 20px;
	 	
	 }
	 .rili{
	 	display: inline-block;
	 	position: relative;
	 	top:13px;
	 	width: 45px;
	 	height: 40px;
	 	background-image: url(static/images/rili.png);
	 	background-repeat: no-repeat;
	 	background-position: center;
	 }
	  .danjv{
	 	display: inline-block;
	 	position: relative;
	 	top:6px;
	 	width: 25px;
	 	height: 25px;
	 	background-image: url(static/images/danjv.png);
	 	background-repeat: no-repeat;
	 	background-position: center;
	 }
	 .head td{
	 	font-size: 20px;
	 	
	 }
	 .che{
	 	display: inline-block;
	 
	 }
	
	 
</style>
	</head>
	<body>
<div id="ctx">		
<div class="container-fluid">
	<div class="row firstdiv">
		<div class="col-md-10"><h1>竣工检查</h1>
		</div>
		<div class="col-md-2" id="ser">
			<button id="sele" class="btn btn-default">搜索</button>
			<button class="btn btn-danger">关闭</button>
		</div>
	</div>
	
	<div id="ss" class="form-inline" >
		
		开单日期：<input id="date1" style="margin-right: 5px;" class="form-control ss" type="datetime" /><i class="rili"></i>
				<input id="date2" class="form-control ss" type="datetime" />
		维修单号：<input id="number" class="form-control ss" type="text" />
		单据状态：<select id="cha"  class="form-control ss">
			<option value="!=">未竣</option>
			<option value="=">已竣</option>
		</select>
		车牌号：<input id="carnumber" class="form-control ss" type="text" />
		<div style="padding-top: 20px;">
		车架号：<input id="carnumber1" class="form-control ss" type="text" />
		</div>
	</div>
	<div id="caidan">
	<h4><i class="danjv"></i>打开单据</h4>
		
	</div>
	<div>
		<table class="table table-hover">
		
			<tr class="head">
				<td>维修单号</td>
				<td>单据类型</td>
				<td>业务类型</td>
				<td>施工班次</td>
				<td>车主姓名</td>
				<td>车牌号</td>
				<td>车型</td>
				<td>车架号</td>
				<td>接车时间</td>
				<td>预计完工</td>
				<td>完工时间</td>
				<td>误工原因</td>
				<td>返工数</td>
				<td>返工原因</td>
				<td>责任人</td>
				<td>处罚金额</td>
				
			</tr>
				<tr v-for="item in list" @dblclick="openTheDocument(item)">
				<td>{{item.number}}</td>
				<td>{{item.tname}}</td>
				<td>{{item.type}}</td>
				<td>{{item.worktime}}</td>
				<td>{{item.clientname}}</td>
				<td>{{item.carnumber}}</td>
				<td>{{item.cartypename}}</td>
				<td>{{item.carnumber1}}</td>
				<td>{{item.ordertime}}</td>
				<td>{{item.overworkdate}}</td>
				<td>{{item.nowworkdate}}</td>
				<td>{{item.reason}}</td>
				<td>{{item.count}}</td>
				<td>{{item.fgreason}}</td>
				<td>{{item.name}}</td>
				<td>{{item.price}}</td>
			</tr>
			
		</table>
	</div>
<button id="motal" class="btn btn-primary btn-lg">竣工检查</button>
<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">竣工检查</h4>
            </div>
            <div class="modal-body content">
            	
            		<div style="margin-right: 30px;" class="form-inline che">
            		<input style="margin-right: 15px; margin-left: 50px; margin-bottom: 6px;" class="form-control" type="radio" name="hege" value="1"/>合格完工<br/>
            		<p>预计完工时间：<input class="form-control" type="date"/></p>
            		<p>实际完工时间：<input class="form-control" type="date"/></p>
            		<p>误工原因：<select style="width:134px; margin-left: 25px;" class="form-control">
            			<option></option>
            		</select></p>
            		<p>质检员：<select style="width:134px;  margin-left: 38px;" class="form-control">
            			<option></option>
            		</select></p>
            		<p>责任人：<select style="width:134px;  margin-left: 38px;" class="form-control">
            			<option></option>
            		</select></p>
            		<p>处罚金额：
            		<input  style="width:134px;  margin-left: 20px;"  class="form-control" type="text" />
            		</p>
            		</div>
            	<div style="position: relative; bottom: 135px;" class="form-inline che">
            		
            		<input style="margin-right: 15px; margin-left: 50px; margin-bottom: 6px;" class="form-control" type="radio" name="hege" value="0"/>不合格返工<span style="margin-left: 20px;">以返工<i>0</i>次</span><br/>
            		<p>误工原因：<select style="width:134px; margin-left: 25px;" class="form-control">
            			<option></option>
            		</select></p>

            		<p>责任人：<select style="width:134px;  margin-left: 38px;" class="form-control">
            			<option></option>
            		</select></p>
            		<p>处罚金额：
            		<input  style="width:134px;  margin-left: 20px;"  class="form-control" type="text" />
            		</p>
            		
            	</div>
            
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary">提交更改</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
</div>
	

</div>
 <script type="text/javascript" src="static/js/jquery-1.12.4.js" ></script>
 <script type="text/javascript" src="static/js/bootstrap.min.js"></script>
 <script type="text/javascript" src="static/js/vue-2.6.js" ></script>
 <script type="text/javascript" src="static/js/Myip.js"></script>
 <script type="text/javascript">
 	var vm=new Vue({
 		el:"#ctx",
 		data(){
 			return {
 				list:[]
 			}
 		},

 		methods:{
 			selectJunGong(tj,date1,date2,number,carnumber,carnumber1){
 				console.log(11)
 				$.ajax({
 					type:"post",
 					url:data.ip+"repair/selectJunGong",
 					data:{
 						tj:tj,
 						date1:date1,
 						date2:date2,
 						number:number,
 						carnumber:carnumber,
 						carnumber1:carnumber1
 					},
 					dataType:"json",
 					success:function(result){
 						console.log("11"+result)
 						vm.list=result
 					}
 				})
 			},
 				openTheDocument(item){
					var carNumber=item.carnumber
					if(item.number==""||item.tname==""){
					window.location.href="document.html?carNumber="+encodeURI(carNumber) +"&&clientType="+vm.clientInfo.clientType+"";
					}else{
						if(item.tname=="维修"){
					window.location.href="updateRepair.html?carNumber="+encodeURI(item.carnumber)+"&&status="+item.status+""+"&&number="+item.number+""+"&&clientType="+item.clientType+"";

						}else{
					window.location.href="updateRescue.html?carNumber="+encodeURI(item.carnumber)+"&&status="+item.status+""+"&&number="+item.number+""+"&&clientType="+item.clientType+"";

						}
					}
					}
 		}
 	})
 	$(function(){
 		$("#date1").val('2021-1-1')
 		$("#date2").val('2021-11-1')
 		vm.selectJunGong("!=","2020-1-1","2020-3-1","","","");
 	$("#cha").change(function(){
 		var tj=$(this).val()
 		var date1=$("#date1").val()
 		var date2=$("#date2").val()
 		var number=$("#number").val();
 		var carnumber=$("#carnumber").val()
 		var carnumber1=$("#carnumber1").val()
 		vm.selectJunGong(tj,date1,date2,number,carnumber,carnumber1);
 	})
 	$("#sele").click(function(){
 		var tj=$("#cha").val()
 		var date1=$("#date1").val()
 		var date2=$("#date2").val()
 		var number=$("#number").val();
 		var carnumber=$("#carnumber").val()
 		var carnumber1=$("#carnumber1").val()
 		vm.selectJunGong(tj,date1,date2,number,carnumber,carnumber1);
 	})
 	})

 	
 </script>
	</body>
</html>